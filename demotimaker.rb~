require 'RMagick'

class Demotimaker

  include Magick
  
  CONFIG = {:max_width => 500, :max_height => 400}

  def initialize(image, title = "", text = "")
    @image = Image.read(image)
    width_prop = CONFIG[:max_width] / @image.columns
    height_prop = CONFIG[:max_height] / @image.rows
    coef = width_prop > height_prop ? width_prop : height_prop
    @image.resize!(coef)
    
    @title = title
    @text  = text
    @demotivator = nil
  end

  def new?
    @demotivator.nil?
  end

  def display
    @demotivator.display
  end

  def generate
    @demotivator = @image
  end
end
